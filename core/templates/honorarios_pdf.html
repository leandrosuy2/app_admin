{% load l10n %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Honorários - Relatório PDF</title>
  <style>
    *{box-sizing:border-box;}
    body{
      font-family: "Inter", Arial, Helvetica, sans-serif;
      margin: 24px;
      color:#1f2937;
      font-size:12px;
      line-height:1.4;
    }
    h1{
      font-size:22px;
      margin:0 0 4px 0;
      color:#0f172a;
    }
    .subtitle{
      margin:0 0 18px 0;
      color:#475569;
    }
    .summary{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin-bottom:18px;
    }
    .card{
      flex:1 1 150px;
      border:1px solid #e2e8f0;
      border-radius:10px;
      padding:10px 14px;
      background:#f8fafc;
    }
    .card span{
      display:block;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:0.06em;
      color:#64748b;
      margin-bottom:6px;
    }
    .card strong{
      font-size:15px;
      color:#0f172a;
    }
    .filters{
      border:1px solid #e2e8f0;
      border-radius:10px;
      padding:12px 16px;
      margin-bottom:16px;
    }
    .filters h3{
      margin:0 0 8px 0;
      font-size:13px;
      color:#0f172a;
    }
    .filters-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:6px 12px;
      font-size:11px;
      color:#475569;
    }
    table{
      width:100%;
      border-collapse:collapse;
      margin-top:10px;
      font-size:11px;
    }
    thead th{
      text-align:left;
      background:#0f172a;
      color:#f8fafc;
      padding:8px;
      font-weight:600;
    }
    tbody td{
      padding:7px 8px;
      border-bottom:1px solid #e2e8f0;
    }
    tfoot td{
      padding:8px;
      font-weight:600;
      background:#f1f5f9;
    }
    .text-right{text-align:right;}
    .text-center{text-align:center;}
    .muted{color:#94a3b8;}
    .footer{
      margin-top:24px;
      font-size:10px;
      color:#94a3b8;
      text-align:right;
    }
  </style>
</head>
<body>
  <header>
    <h1>Relatório de Honorários</h1>
    <p class="subtitle">Sistema Inteligente de Cobrança &middot; Gerado em {{ generated_at|date:"d/m/Y H:i" }}</p>
  </header>

  <section class="filters">
    <h3>Filtros aplicados</h3>
    <div class="filters-grid">
      <div><strong>Período:</strong> {{ data_inicio|default:"-" }} &rarr; {{ data_fim|default:"-" }}</div>
      <div><strong>Operador:</strong> {{ operador|default:"Todos" }}</div>
      <div><strong>Credor:</strong> {{ empresa|default:"Todos" }}</div>
      <div><strong>Devedor:</strong> {{ devedor|default:"Todos" }}</div>
      <div><strong>CPF/CNPJ:</strong> {{ cpf_cnpj|default:"-" }}</div>
    </div>
  </section>

  <section class="summary">
    <div class="card">
      <span>Principal</span>
      <strong>R$ {{ tot_valor_principal|localize }}</strong>
    </div>
    <div class="card">
      <span>Pago</span>
      <strong>R$ {{ tot_valor_pago|localize }}</strong>
    </div>
    <div class="card">
      <span>Honorários</span>
      <strong>R$ {{ tot_comissao|localize }}</strong>
    </div>
    <div class="card">
      <span>Líquido</span>
      <strong>R$ {{ tot_liquido|localize }}</strong>
    </div>
    <div class="card">
      <span>Operador (25%)</span>
      <strong>R$ {{ honorario_total|localize }}</strong>
    </div>
  </section>

  <table>
    <thead>
      <tr>
        <th>Devedor</th>
        <th>Credor</th>
        <th>Doc</th>
        <th>Operador</th>
        <th>Vencto.</th>
        <th>Pagto.</th>
        <th>Forma</th>
        <th>Parc.</th>
        <th class="text-right">Principal</th>
        <th class="text-right">Pago</th>
        <th class="text-right">Honorários</th>
        <th class="text-right">Líquido</th>
      </tr>
    </thead>
    <tbody>
      {% for h in itens %}
      <tr>
        <td>{{ h.devedor }}</td>
        <td>{{ h.credor }}</td>
        <td>{{ h.doc }}</td>
        <td>{{ h.operador }}</td>
        <td>{{ h.vencto|date:"d/m/Y" }}</td>
        <td>{{ h.pagto|date:"d/m/Y" }}</td>
        <td>{{ h.forma }}</td>
        <td>{{ h.parc }}</td>
        <td class="text-right">R$ {{ h.valor_principal|localize }}</td>
        <td class="text-right">R$ {{ h.valor_pago|localize }}</td>
        <td class="text-right">R$ {{ h.honorarios_credor|localize }}</td>
        <td class="text-right">R$ {{ h.valor_liq|localize }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="12" class="text-center muted">Nenhum registro encontrado para os filtros informados.</td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <td colspan="8" class="text-right">Totais</td>
        <td class="text-right">R$ {{ tot_valor_principal|localize }}</td>
        <td class="text-right">R$ {{ tot_valor_pago|localize }}</td>
        <td class="text-right">R$ {{ tot_comissao|localize }}</td>
        <td class="text-right">R$ {{ tot_liquido|localize }}</td>
      </tr>
    </tfoot>
  </table>

  <p class="footer">Documento gerado automaticamente · Uso interno</p>
</body>
</html>

